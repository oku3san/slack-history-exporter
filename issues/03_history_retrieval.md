# Slackチャンネル履歴取得機能の実装

## 説明
Slackのチャンネルから会話履歴を取得する機能を実装します。基本的なチャンネル履歴の取得、ページネーション対応、スレッドコメントの取得などを含みます。

## タスク
- [ ] 履歴取得モジュールの設計
  - [ ] 履歴取得インターフェースの定義
  - [ ] モックの作成（テスト用）
- [ ] 基本的なチャンネル履歴取得機能
  - [ ] チャンネルIDを指定して履歴を取得
  - [ ] 取得したメッセージの構造体定義
  - [ ] 日付範囲指定による履歴取得
- [ ] ページネーション対応
  - [ ] カーソルベースのページネーション実装
  - [ ] API制限に対応した待機処理
- [ ] スレッドコメント取得機能
  - [ ] 親メッセージに対するスレッド返信の取得
  - [ ] スレッド返信の構造体への格納
- [ ] テストの作成
  - [ ] 基本的な履歴取得のテスト
  - [ ] ページネーションのテスト
  - [ ] スレッド返信取得のテスト
  - [ ] エラーケースのテスト

## 受け入れ基準
- [ ] 指定したチャンネルIDから履歴を正しく取得できる
- [ ] 大量のメッセージがある場合もページネーションで全て取得できる
- [ ] スレッド返信も含めて取得できる
- [ ] 日付範囲を指定して履歴を取得できる
- [ ] API制限に達した場合、適切に待機して再試行する
- [ ] すべてのテストが成功する

## 技術的な詳細
- 履歴取得モジュールは `internal/history` パッケージに実装
- Slack APIの `conversations.history` エンドポイントを使用
- スレッド返信取得には `conversations.replies` エンドポイントを使用
- ページネーションはカーソルベースで実装
- API制限対応はエクスポネンシャルバックオフ戦略を使用
- 日付範囲指定には `oldest` と `latest` パラメータを使用
